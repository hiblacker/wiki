# 面试

https://juejin.cn/post/6987549240436195364

## 基础

### 1、列举你所了解的计算机存储设备类型？

现代计算机以存储器为中心，主要由`CPU`、`I/O设备`以及`主存储器`组成。各个部分之间通过系统总线进行连接通信。

存储层次是在计算机体系结构下存储系统层次结构的排列顺序。每一层于下一层相比都拥有较高的速度和较低延迟性，以及较小的容量（也有少量例外，如 AMD 早期的 Duron CPU）。大部分现今的中央处理器的速度都非常的快。大部分程序工作量需要存储器访问。由于高速缓存的效率和存储器传输位于层次结构中的不同等级，所以实际上会限制处理的速度，导致中央处理器花费大量的时间等待存储器 I/O 完成工作。

计算机存储器可分为内部存储器（又称内存或主存）和外部存储器，其中内存是CPU能直接寻址的储存空间，由半导体器件制成。

大部分电脑中的存储层次如下四层：

1. 寄存器–可能是最快的访问。在 32 位处理器，每个寄存器就是 32 位。x86 处理器共有 16 个寄存器。
2. 高速缓存（L1-L3：SRAM、L4：DRAM）
    - 第一级高速缓存（L1）–通常访问只需要几个周期，通常是几十个 KB。
    - 第二级高速缓存（L2）–比 L1 约有 2 到 10 倍较高延迟性，通常是几百个 KB 或更多。
    - 第三级高速缓存（L3）–比 L2 更高的延迟性，通常有数 MB 之大。
    - 第四级高速缓存（L4）（不一定有）–CPU 外部的 DRAM，但速度较主存高。
3. 主存（DRAM）–访问需要几百个周期，可以大到数十 GB。
4. 磁盘存储–需要成千上万个周期，容量非常大。

### 一般代码存储在计算机的哪个设备中？代码在 CPU 中是如何运行的？

主要由控制单元、运算单元和存储单元组成（注意忽略了中断系统），各自的作用如下：

- 控制单元：在节拍脉冲的作用下，将程序计数器（Program Counter，PC）指向的主存或者多级高速缓存中的指令地址送到地址总线，接着获取指令地址所对应的指令并放入指令寄存器 （Instruction Register，IR）中，然后通过指令译码器（Instruction Decoder，ID）分析指令需要进行的操作，最后通过操作控制器（Operation Controller，OC）向其他设备发出微操作控制信号。
- 运算单元：如果控制单元发出的控制信号存在算术运算（加、减、乘、除、增 1、减 1、取反等）或者逻辑运算（与、或、非、异或），那么需要通过运算单元获取存储单元的计算数据进行处理。
- 存储单元：包括片内缓存和寄存器组，是 CPU 中临时数据的存储地方。CPU 直接访问主存数据大概需要花费数百个机器周期，而访问寄存器或者片内缓存只需要若干个或者几十个机器周期，因此会使用内部寄存器或缓存来存储和获取临时数据（即将被运算或者运算之后的数据），从而提高 CPU 的运行效率。
